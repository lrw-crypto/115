<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>115å­¸å¹´åº¦ åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤ç”„é¸å…¥å­¸æŸ¥è©¢ç³»çµ±</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
    </style>
</head>
<body class="bg-slate-50">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // ============================================================
        // åœ–ç¤ºæ›¿ä»£å…ƒä»¶ (ä½¿ç”¨ Emoji æ›¿ä»£ Lucide Icon ä»¥é¿å… Import éŒ¯èª¤)
        // ============================================================
        const IconWrapper = ({ children, className, size }) => (
            <span className={className} style={{ fontSize: size || 16, lineHeight: 1 }}>{children}</span>
        );

        const LineChart = (props) => <IconWrapper {...props}>ğŸ“ˆ</IconWrapper>;
        const GraduationCap = (props) => <IconWrapper {...props}>ğŸ“</IconWrapper>;
        const Check = (props) => <IconWrapper {...props}>âœ”ï¸</IconWrapper>;
        const Info = (props) => <IconWrapper {...props}>â„¹ï¸</IconWrapper>;
        const HelpCircle = (props) => <IconWrapper {...props}>â“</IconWrapper>;
        const RotateCcw = (props) => <IconWrapper {...props}>ğŸ”„</IconWrapper>;
        const AlertCircle = (props) => <IconWrapper {...props}>âš ï¸</IconWrapper>;
        const ArrowRightLeft = (props) => <IconWrapper {...props}>â‡„</IconWrapper>;
        const Filter = (props) => <IconWrapper {...props}>âš™ï¸</IconWrapper>;
        const Scale = (props) => <IconWrapper {...props}>âš–ï¸</IconWrapper>;
        const Search = (props) => <IconWrapper {...props}>ğŸ”</IconWrapper>;
        const Landmark = (props) => <IconWrapper {...props}>ğŸ›ï¸</IconWrapper>;
        const HardHat = (props) => <IconWrapper {...props}>ğŸ‘·</IconWrapper>;

        // ============================================================
        // è³‡æ–™åº«ï¼šåœŸæœ¨èˆ‡å»ºç¯‰ç¾¤
        // âœ… å·²å°‡æ¯ç­† screening æ”¹æˆèˆ‡ PDFï¼ˆ114 åœŸæœ¨ç¾¤ç¬¬ä¸€éšæ®µç¯©é¸æ¨™æº–ï¼‰ä¸€è‡´
        // ============================================================
        const admissionsData = [
            {
                "id": "701002", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹ä¸­å±±å¤§å­¸", "dept": "æµ·æ´‹ç’°å¢ƒåŠå·¥ç¨‹å­¸ç³»",
                "ratios": {"chi": 0, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["è‹±æ–‡(7)", "æ•¸å­¸(12)", "å°ˆä¸€å°ˆäºŒ(20)"],
                "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": null
            },
            {
                "id": "706005", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹ä¸­èˆˆå¤§å­¸", "dept": "åœŸæœ¨å·¥ç¨‹å­¸ç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["æ•¸å­¸(14)", "å°ˆä¸€å°ˆäºŒ(22)", "ç´šåˆ†å’Œ(61)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 60
            },
            {
                "id": "017001", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹å®œè˜­å¤§å­¸", "dept": "åœŸæœ¨å·¥ç¨‹å­¸ç³»",
                "ratios": {"chi": 1, "eng": 0, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["æ•¸å­¸(12)", "å°ˆä¸€å°ˆäºŒ(13)"],
                "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 38
            },
            {
                "id": "033001", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹é‡‘é–€å¤§å­¸", "dept": "åœŸæœ¨èˆ‡å·¥ç¨‹ç®¡ç†å­¸ç³»",
                "ratios": {"chi": 1, "eng": 0, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["åœ‹æ–‡(8)", "å°ˆä¸€å°ˆäºŒ(13)", "ç´šåˆ†å’Œ(30)"],
                "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": null
            },
            {
                "id": "103009", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹å±æ±ç§‘æŠ€å¤§å­¸", "dept": "æœ¨æç§‘å­¸èˆ‡è¨­è¨ˆç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 0, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["åœ‹æ–‡(11)", "è‹±æ–‡(6)", "å°ˆä¸€å°ˆäºŒ(15)", "ç´šåˆ†å’Œ(39)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": false, "pro1": true, "pro2": true }, "tiebreakerSum": 41
            },
            {
                "id": "103023", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹å±æ±ç§‘æŠ€å¤§å­¸", "dept": "åœŸæœ¨å·¥ç¨‹ç³»",
                "ratios": {"chi": 1, "eng": 0, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["åœ‹æ–‡(7)", "æ•¸å­¸(5)", "å°ˆäºŒ(7)", "å°ˆä¸€(5)", "ç´šåˆ†å’Œ(30)"],
                "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 44
            },
            {
                "id": "103024", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹å±æ±ç§‘æŠ€å¤§å­¸", "dept": "æ°´åœŸä¿æŒç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["å°ˆä¸€(5)", "å°ˆäºŒ(8)", "ç´šåˆ†å’Œ(33)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 40
            },
            {
                "id": "708001", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹é«˜é›„å¤§å­¸", "dept": "å»ºç¯‰å­¸ç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["åœ‹æ–‡(11)", "è‹±æ–‡(12)", "å°ˆäºŒ(9)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 64
            },
            {
                "id": "105030", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹é«˜é›„ç§‘æŠ€å¤§å­¸", "dept": "åœŸæœ¨å·¥ç¨‹ç³»",
                "ratios": {"chi": 1, "eng": 0, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["åœ‹æ–‡(8)", "æ•¸å­¸(6)", "å°ˆä¸€å°ˆäºŒ(14)", "ç´šåˆ†å’Œ(30)"],
                "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 45
            },
            {
                "id": "105045", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹é«˜é›„ç§‘æŠ€å¤§å­¸", "dept": "ç‡Ÿå»ºå·¥ç¨‹ç³»",
                "ratios": {"chi": 1, "eng": 0, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["åœ‹æ–‡(9)", "æ•¸å­¸(6)", "å°ˆä¸€(6)", "ç´šåˆ†å’Œ(33)"],
                "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 50
            },
            {
                "id": "105089", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹é«˜é›„ç§‘æŠ€å¤§å­¸", "dept": "ç’°å¢ƒèˆ‡å®‰å…¨è¡›ç”Ÿå·¥ç¨‹ç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 0, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["åœ‹æ–‡(9)", "å°ˆä¸€(7)", "ç´šåˆ†å’Œ(29)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": false, "pro1": true, "pro2": true }, "tiebreakerSum": 43
            },
            {
                "id": "703001", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹é™½æ˜äº¤é€šå¤§å­¸", "dept": "åœŸæœ¨å·¥ç¨‹å­¸ç³»",
                "ratios": {"chi": 0, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["è‹±æ–‡æ•¸å­¸(28)", "å°ˆä¸€å°ˆäºŒ(27)"],
                "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 60
            },
            {
                "id": "102015", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹é›²æ—ç§‘æŠ€å¤§å­¸", "dept": "ç‡Ÿå»ºå·¥ç¨‹ç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["è‹±æ–‡æ•¸å­¸(6)", "å°ˆä¸€å°ˆäºŒ(18)", "ç´šåˆ†å’Œ(45)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 51
            },
            {
                "id": "102042", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹é›²æ—ç§‘æŠ€å¤§å­¸", "dept": "å»ºç¯‰èˆ‡å®¤å…§è¨­è¨ˆç³»å»ºç¯‰çµ„",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["åœ‹æ–‡è‹±æ–‡æ•¸å­¸(34)", "å°ˆä¸€å°ˆäºŒ(18)", "ç´šåˆ†å’Œ(52)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 55
            },
            {
                "id": "102043", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹é›²æ—ç§‘æŠ€å¤§å­¸", "dept": "å»ºç¯‰èˆ‡å®¤å…§è¨­è¨ˆç³»å®¤å…§çµ„",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["åœ‹æ–‡è‹±æ–‡æ•¸å­¸(32)", "å°ˆä¸€å°ˆäºŒ(17)", "ç´šåˆ†å’Œ(51)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 56
            },
            {
                "id": "102048", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹é›²æ—ç§‘æŠ€å¤§å­¸", "dept": "å‰µæ„ç”Ÿæ´»è¨­è¨ˆç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 0, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["æ•¸å­¸(7)", "åœ‹æ–‡è‹±æ–‡(19)", "å°ˆä¸€å°ˆäºŒ(18)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": false, "pro1": true, "pro2": true }, "tiebreakerSum": 55
            },
            {
                "id": "102055", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹é›²æ—ç§‘æŠ€å¤§å­¸", "dept": "è·¨åŸŸæ•´åˆè¨­è¨ˆå­¸å£«å­¸ä½å­¸ç¨‹",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["åœ‹æ–‡(11)", "å°ˆäºŒ(9)", "ç´šåˆ†å’Œ(45)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 49
            },
            {
                "id": "110042", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹å‹¤ç›Šç§‘æŠ€å¤§å­¸", "dept": "æ™¯è§€ç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 0, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["å°ˆäºŒ(9)", "å°ˆä¸€(5)", "ç´šåˆ†å’Œ(35)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": false, "pro1": true, "pro2": true }, "tiebreakerSum": 45
            },
            {
                "id": "113032", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹è‡ºä¸­ç§‘æŠ€å¤§å­¸", "dept": "å®¤å…§è¨­è¨ˆç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["å°ˆäºŒ(9)", "å°ˆä¸€(7)", "ç´šåˆ†å’Œ(46)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 55
            },
            {
                "id": "104014", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹è‡ºåŒ—ç§‘æŠ€å¤§å­¸", "dept": "åœŸæœ¨å·¥ç¨‹ç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["è‹±æ–‡(4)", "å°ˆä¸€å°ˆäºŒ(18)", "ç´šåˆ†å’Œ(50)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 60
            },
            {
                "id": "104016", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹è‡ºåŒ—ç§‘æŠ€å¤§å­¸", "dept": "ææ–™åŠè³‡æºå·¥ç¨‹ç³»è³‡æºçµ„",
                "ratios": {"chi": 0, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["è‹±æ–‡(12)", "å°ˆä¸€(9)", "ç´šåˆ†å’Œ(40)"],
                "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 57
            },
            {
                "id": "104028", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹è‡ºåŒ—ç§‘æŠ€å¤§å­¸", "dept": "å»ºç¯‰ç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["è‹±æ–‡(10)", "å°ˆä¸€(8)", "å°ˆäºŒ(10)", "ç´šåˆ†å’Œ(51)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 65
            },
            {
                "id": "503413", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹è‡ºæ±å°ˆç§‘å­¸æ ¡", "dept": "å»ºç¯‰ç§‘",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["åœ‹æ–‡è‹±æ–‡æ•¸å­¸(14)", "å°ˆä¸€å°ˆäºŒ(7)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": null
            },
            {
                "id": "700001", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹è‡ºç£å¤§å­¸", "dept": "åœŸæœ¨å·¥ç¨‹å­¸ç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["åœ‹æ–‡è‹±æ–‡æ•¸å­¸(41)", "å°ˆä¸€å°ˆäºŒ(24)", "ç´šåˆ†å’Œ(65)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 68
            },
            {
                "id": "101006", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹è‡ºç£ç§‘æŠ€å¤§å­¸", "dept": "ç‡Ÿå»ºå·¥ç¨‹ç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["è‹±æ–‡(3)", "æ•¸å­¸(10)", "å°ˆä¸€å°ˆäºŒ(22)", "ç´šåˆ†å’Œ(57)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 57
            },
            {
                "id": "101017", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹è‡ºç£ç§‘æŠ€å¤§å­¸", "dept": "å»ºç¯‰ç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["åœ‹æ–‡è‹±æ–‡æ•¸å­¸(31)", "å°ˆä¸€å°ˆäºŒ(22)", "ç´šåˆ†å’Œ(60)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 60
            },
            {
                "id": "702004", "group": "åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤", "school": "åœ‹ç«‹è¯åˆå¤§å­¸", "dept": "å»ºç¯‰å­¸ç³»",
                "ratios": {"chi": 1, "eng": 1, "math": 1, "pro1": 1, "pro2": 1}, "change": "ç„¡è®Šæ›´",
                "screening": ["åœ‹æ–‡(8)", "å°ˆäºŒ(10)"],
                "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true }, "tiebreakerSum": 50
            }
        ];

        const App = () => {
            const [filters, setFilters] = useState({
                chi: false,
                eng: false,
                math: false,
                pro1: false,
                pro2: false
            });
            const [strictMode, setStrictMode] = useState(true);
            const [searchTerm, setSearchTerm] = useState("");

            const toggleFilter = (subject) => {
                setFilters(prev => ({ ...prev, [subject]: !prev[subject] }));
            };

            const resetFilters = () => {
                setFilters({ chi: false, eng: false, math: false, pro1: false, pro2: false });
                setSearchTerm("");
            };

            const subjectLabels = { chi: "åœ‹æ–‡", eng: "è‹±æ–‡", math: "æ•¸å­¸", pro1: "å°ˆä¸€", pro2: "å°ˆäºŒ" };
            const subjectShortLabels = { chi: "åœ‹", eng: "è‹±", math: "æ•¸", pro1: "å°ˆä¸€", pro2: "å°ˆäºŒ" };

            const renderTiebreaker = (item) => {
                if (item.tiebreakerV) {
                    const subjects = [];
                    if (item.tiebreakerV.chi) subjects.push("åœ‹");
                    if (item.tiebreakerV.eng) subjects.push("è‹±");
                    if (item.tiebreakerV.math) subjects.push("æ•¸");
                    if (item.tiebreakerV.pro1) subjects.push("å°ˆä¸€");
                    if (item.tiebreakerV.pro2) subjects.push("å°ˆäºŒ");

                    if (subjects.length === 0) return <span className="text-slate-400">ç„¡æ¡è¨ˆç§‘ç›®</span>;

                    const formula = `(${subjects.join('+')})ç´šåˆ†å’Œ`;
                    const scoreDisplay = item.tiebreakerSum && item.tiebreakerSum !== "ç„¡è³‡æ–™" ? `(${item.tiebreakerSum})` : "";

                    return (
                        <div className="flex flex-wrap items-center gap-1">
                            <span className="font-bold text-orange-700">{formula}</span>
                            {scoreDisplay && <span className="bg-orange-600 text-white text-xs px-1.5 py-0.5 rounded ml-1">{scoreDisplay}</span>}
                        </div>
                    );
                }
                return <span className="text-slate-400 italic">ç„¡è³‡æ–™</span>;
            };

            const filteredData = useMemo(() => {
                return admissionsData.filter(item => {
                    if (searchTerm) {
                        const searchKeywords = searchTerm.trim().split(/\s+/);
                        const match = searchKeywords.every(kw => {
                            const synonym = {
                                'åœŸæœ¨': 'åœŸæœ¨å·¥ç¨‹',
                                'ç‡Ÿå»º': 'ç‡Ÿå»ºå·¥ç¨‹',
                                'å»ºç¯‰': 'å»ºç¯‰ç³»',
                                'å®¤è¨­': 'å®¤å…§è¨­è¨ˆ',
                                'å‰µè¨­': 'å‰µæ„ç”Ÿæ´»',
                                'ç’°å®‰': 'ç’°å¢ƒèˆ‡å®‰å…¨è¡›ç”Ÿ',
                                'æ™¯è§€': 'æ™¯è§€ç³»',
                                'æ°´ä¿': 'æ°´åœŸä¿æŒ',
                                'è‡ºç§‘': 'è‡ºç£ç§‘æŠ€å¤§å­¸',
                                'åŒ—ç§‘': 'è‡ºåŒ—ç§‘æŠ€å¤§å­¸',
                                'å°ç§‘': 'è‡ºç£ç§‘æŠ€å¤§å­¸',
                                'é«˜ç§‘': 'é«˜é›„ç§‘æŠ€å¤§å­¸',
                                'é›²ç§‘': 'é›²æ—ç§‘æŠ€å¤§å­¸',
                                'ä¸­ç§‘': 'è‡ºä¸­ç§‘æŠ€å¤§å­¸',
                                'å‹¤ç›Š': 'å‹¤ç›Šç§‘æŠ€å¤§å­¸',
                                'å±ç§‘': 'å±æ±ç§‘æŠ€å¤§å­¸',
                                'ä¸­èˆˆ': 'ä¸­èˆˆå¤§å­¸',
                                'äº¤å¤§': 'é™½æ˜äº¤é€šå¤§å­¸',
                                'å°å¤§': 'è‡ºç£å¤§å­¸',
                                'æˆå¤§': 'æˆåŠŸå¤§å­¸',
                                'é‡‘å¤§': 'é‡‘é–€å¤§å­¸',
                                'å®œå¤§': 'å®œè˜­å¤§å­¸',
                                'è¯åˆ': 'è¯åˆå¤§å­¸',
                                'å°æ±': 'è‡ºæ±å°ˆç§‘å­¸æ ¡'
                            }[kw] || kw;

                            return item.school.includes(kw) || item.dept.includes(kw) ||
                                   item.school.includes(synonym) || item.dept.includes(synonym);
                        });
                        if (!match) return false;
                    }

                    const selectedSubjects = Object.keys(filters).filter(k => filters[k]);
                    if (selectedSubjects.length === 0) return true;

                    if (strictMode) {
                        for (let subj of selectedSubjects) {
                            if (item.ratios[subj] === 0) return false;
                        }
                        const allSubjects = ['chi', 'eng', 'math', 'pro1', 'pro2'];
                        for (let subj of allSubjects) {
                            if (!filters[subj] && item.ratios[subj] > 0) return false;
                        }
                        return true;
                    } else {
                        for (let subj of selectedSubjects) {
                            if (item.ratios[subj] === 0) return false;
                        }
                        return true;
                    }
                });
            }, [filters, strictMode, searchTerm]);

            return (
                <div className="min-h-screen pb-12 font-sans bg-slate-50 text-slate-900">
                    <div className="bg-gradient-to-r from-slate-700 to-indigo-900 text-white shadow-xl border-b-4 border-orange-500">
                        <div className="max-w-7xl mx-auto px-4 py-10 relative overflow-hidden">
                            <div className="absolute top-0 right-0 p-4 opacity-10 transform translate-x-10 -translate-y-4">
                                <Landmark size={150} />
                            </div>
                            <div className="relative z-10">
                                <h1 className="text-3xl md:text-4xl font-bold mb-3 tracking-tight flex items-center">
                                    <HardHat className="mr-4 text-orange-400" size={36} />
                                    115å­¸å¹´åº¦ åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤ç”„é¸å…¥å­¸æŸ¥è©¢ç³»çµ±
                                </h1>
                                <p className="text-slate-200 text-lg max-w-2xl font-light">
                                    å°ˆç‚ºåœŸæœ¨èˆ‡å»ºç¯‰ç¾¤è€ƒç”Ÿè¨­è¨ˆï¼Œæ•´åˆåœ‹ç«‹ç§‘æŠ€å¤§å­¸èˆ‡é ‚å°–å¤§å­¸æœ€æ–°å€ç‡èˆ‡å»å¹´é€šéæ¨™æº–ã€‚
                                </p>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-7xl mx-auto px-4 -mt-8 relative z-10">
                        <div className="bg-white rounded-xl shadow-lg p-6 mb-8 border border-slate-100">
                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div>
                                    <h3 className="text-sm font-bold text-slate-700 mb-4 flex items-center">
                                        <span className="bg-indigo-100 text-indigo-700 w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs">1</span>
                                        é¸æ“‡ç¯©é¸ç§‘ç›® (115å¹´å€ç‡)
                                    </h3>
                                    <div className="flex flex-wrap gap-3">
                                        {Object.entries(subjectLabels).map(([key, label]) => (
                                            <button
                                                key={key}
                                                onClick={() => toggleFilter(key)}
                                                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 border shadow-sm flex items-center justify-center ${filters[key] ? 'bg-indigo-600 text-white border-indigo-600 ring-2 ring-indigo-200' : 'bg-white text-slate-600 border-slate-300 hover:bg-slate-50'}`}
                                            >
                                                {filters[key] && <Check className="mr-2" size={14} />}
                                                {label}
                                            </button>
                                        ))}
                                    </div>
                                    <div className="mt-3 text-xs text-slate-500 bg-slate-50 p-2 rounded flex items-start">
                                        <Info className="mr-1 mt-0.5 text-indigo-500" size={14} />
                                        <span>æç¤ºï¼šè‹¥æ‚¨æ•¸å­¸è¼ƒå¼±ï¼Œå¯å˜—è©¦ä¸å‹¾é¸ã€Œæ•¸å­¸ã€ä¸¦é–‹å•Ÿåš´æ ¼æ¨¡å¼ï¼Œæ‰¾å‡ºä¸æ¡è¨ˆæ•¸å­¸çš„è¨­è¨ˆé¡ç§‘ç³»ã€‚</span>
                                    </div>
                                </div>

                                <div className="flex flex-col gap-4">
                                    <div>
                                        <h3 className="text-sm font-bold text-slate-700 mb-4 flex items-center">
                                            <span className="bg-indigo-100 text-indigo-700 w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs">2</span>
                                            è¨­å®šç¯©é¸æ¨¡å¼èˆ‡æœå°‹
                                        </h3>

                                        <div
                                            onClick={() => setStrictMode(!strictMode)}
                                            className={`cursor-pointer p-4 rounded-lg border transition-all duration-200 flex items-center justify-between group
                                                ${strictMode ? 'bg-indigo-50 border-indigo-200' : 'bg-white border-slate-200 hover:border-indigo-300'}`}
                                        >
                                            <div className="flex items-center gap-3">
                                                <div className={`w-10 h-6 flex items-center rounded-full p-1 duration-300 ${strictMode ? 'bg-indigo-600' : 'bg-slate-300'}`}>
                                                    <div className={`bg-white w-4 h-4 rounded-full shadow-md transform duration-300 ${strictMode ? 'translate-x-4' : ''}`}></div>
                                                </div>
                                                <div className="flex flex-col">
                                                    <span className={`text-sm font-bold ${strictMode ? 'text-indigo-900' : 'text-slate-600'}`}>
                                                        åš´æ ¼ç¯©é¸æ¨¡å¼ (Only)
                                                    </span>
                                                    <span className="text-xs text-slate-500">
                                                        {strictMode ? 'åªé¡¯ç¤ºã€Œå®Œå…¨ç¬¦åˆã€æ‰€é¸ç§‘ç›®çš„ç§‘ç³» (å…¶ä»–ç§‘ç›®å€ç‡ç‚º0)' : 'é¡¯ç¤ºã€ŒåŒ…å«ã€æ‰€é¸ç§‘ç›®çš„æ‰€æœ‰ç§‘ç³»'}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="relative">
                                        <div className="absolute left-3 top-3 text-slate-400">
                                            <Search size={18} />
                                        </div>
                                        <input
                                            type="text"
                                            placeholder="æœå°‹å­¸æ ¡æˆ–ç§‘ç³» (å¦‚ï¼šè‡ºç§‘ã€åœŸæœ¨ã€å»ºç¯‰ã€å®¤å…§)..."
                                            value={searchTerm}
                                            onChange={(e) => setSearchTerm(e.target.value)}
                                            className="w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-indigo-500 focus:outline-none transition-all"
                                        />
                                    </div>
                                </div>
                            </div>

                            <div className="mt-6 pt-4 border-t border-slate-100 flex justify-between items-center">
                                <span className="text-slate-700 text-sm">
                                    å…±æ‰¾åˆ° <strong className="text-indigo-700 text-lg mx-1">{filteredData.length}</strong> å€‹ç¬¦åˆæ¢ä»¶çš„åœ‹ç«‹ç§‘ç³»
                                </span>
                                {(Object.values(filters).some(Boolean) || searchTerm) && (
                                    <button onClick={resetFilters} className="text-sm text-slate-500 hover:text-red-500 flex items-center gap-1 transition-colors">
                                        <RotateCcw size={14} className="mr-1" /> é‡ç½®æ‰€æœ‰æ¢ä»¶
                                    </button>
                                )}
                            </div>
                        </div>

                        <div className="bg-white rounded-xl shadow-lg overflow-hidden border border-slate-200">
                            <div className="overflow-x-auto">
                                <table className="min-w-full divide-y divide-slate-200">
                                    <thead className="bg-slate-50">
                                        <tr>
                                            <th scope="col" className="px-4 py-3 text-left text-xs font-bold text-slate-600 uppercase tracking-wider bg-slate-100 border-b border-slate-200 w-3/12">å­¸æ ¡ç§‘ç³» (ä»£ç¢¼)</th>
                                            <th scope="col" className="px-4 py-3 text-left text-xs font-bold text-slate-600 uppercase tracking-wider bg-slate-100 border-b border-slate-200 w-2/12 text-center">115å¹´ ç¯©é¸å€ç‡</th>
                                            <th scope="col" className="px-4 py-3 text-left text-xs font-bold text-slate-600 uppercase tracking-wider bg-slate-100 border-b border-slate-200 w-2/12">è®Šæ›´èªªæ˜</th>
                                            <th scope="col" className="px-4 py-3 text-left text-xs font-bold text-slate-600 uppercase tracking-wider bg-slate-100 border-b border-slate-200 w-5/12">114å¹´ é€šéæ¨™æº– (å…©éšæ®µ)</th>
                                        </tr>
                                    </thead>
                                    <tbody className="bg-white divide-y divide-slate-100">
                                        {filteredData.length > 0 ? (
                                            filteredData.map((item, idx) => (
                                                <tr key={item.id} className={`hover:bg-indigo-50/30 transition-colors ${idx % 2 === 0 ? 'bg-white' : 'bg-slate-50/30'}`}>
                                                    <td className="px-4 py-4 text-sm text-slate-700 border-b border-slate-100 align-top">
                                                        <div className="flex flex-col items-start">
                                                            <span className="px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-md mb-1 bg-slate-100 text-slate-600 border border-slate-200">
                                                                {item.group}
                                                            </span>
                                                            <span className="text-base font-bold text-slate-800">{item.school}</span>
                                                            <span className="text-indigo-700 font-medium mt-0.5">{item.dept}</span>
                                                            <span className="text-xs text-slate-400 mt-1 font-mono">{item.id}</span>
                                                        </div>
                                                    </td>
                                                    <td className="px-4 py-4 text-sm text-slate-700 border-b border-slate-100 align-top">
                                                        <div className="flex justify-center flex-wrap gap-2">
                                                            {Object.entries(item.ratios).map(([subj, val]) => (
                                                                val > 0 ? (
                                                                    <div key={subj} className="flex flex-col items-center group">
                                                                        <span className="bg-slate-200 text-slate-700 text-[10px] font-bold px-2 py-0.5 rounded-t w-10 text-center border-b border-slate-300">
                                                                            {subjectShortLabels[subj]}
                                                                        </span>
                                                                        <span className="bg-white text-indigo-700 font-bold text-sm border border-slate-200 w-10 text-center py-1 rounded-b shadow-sm group-hover:border-slate-400 transition-colors flex justify-center items-center h-7">
                                                                            V
                                                                        </span>
                                                                    </div>
                                                                ) : null
                                                            ))}
                                                            {Object.values(item.ratios).every(v => v === 0) && (
                                                                <span className="text-slate-400 text-xs italic">ç„¡ç¯©é¸è³‡æ–™</span>
                                                            )}
                                                        </div>
                                                    </td>
                                                    <td className="px-4 py-4 text-sm text-slate-700 border-b border-slate-100 align-top">
                                                        {item.change === "ç„¡è®Šæ›´" ? (
                                                            <span className="px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-md bg-green-100 text-green-700 border border-green-200 flex items-center w-fit">
                                                                <Check className="mr-1.5" size={12} />ç„¡è®Šæ›´
                                                            </span>
                                                        ) : (
                                                            <span className="px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-md bg-purple-100 text-purple-700 border border-purple-200 flex items-center w-fit">
                                                                <AlertCircle className="mr-1.5" size={12} />{item.change}
                                                            </span>
                                                        )}
                                                    </td>
                                                    <td className="px-4 py-4 text-sm text-slate-700 border-b border-slate-100 align-top">
                                                        <div className="flex flex-col gap-3">

                                                            <div className="text-xs text-slate-600 bg-slate-50 p-2.5 rounded-lg border border-slate-200 leading-relaxed">
                                                                <strong className="block text-slate-800 mb-1.5 border-b border-slate-200 pb-1 flex items-center">
                                                                    <Filter className="mr-1" size={12} />ç¬¬ä¸€éšæ®µç¯©é¸æ¨™æº–
                                                                </strong>
                                                                {item.screening && item.screening.length > 0 ? (
                                                                    item.screening.map((std, i) => (
                                                                        <span key={i} className="block mb-1 pl-2 border-l-2 border-slate-300">
                                                                            {std}
                                                                        </span>
                                                                    ))
                                                                ) : (
                                                                    <span className="text-slate-400 italic">ç„¡è³‡æ–™æˆ–æ–°ç§‘ç³»</span>
                                                                )}
                                                            </div>

                                                            <div className="text-xs text-slate-600 bg-orange-50/50 p-2.5 rounded-lg border border-orange-100 leading-relaxed">
                                                                <strong className="block text-orange-800 mb-1.5 border-b border-orange-200 pb-1 flex justify-between items-center">
                                                                    <span className="flex items-center"><Scale className="mr-1" size={12} />åŒç´šåˆ†è¶…é¡ç¯©é¸</span>
                                                                </strong>
                                                                <div className="pl-2">
                                                                    {renderTiebreaker(item)}
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </td>
                                                </tr>
                                            ))
                                        ) : (
                                            <tr>
                                                <td colSpan="4" className="px-6 py-16 text-center text-slate-500">
                                                    <div className="flex flex-col items-center">
                                                        <div className="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4 text-slate-400">
                                                            <Filter size={32} />
                                                        </div>
                                                        <h3 className="text-lg font-medium text-slate-800 mb-1">æ²’æœ‰ç¬¦åˆæ¢ä»¶çš„ç§‘ç³»</h3>
                                                        <p className="text-sm text-slate-500">è«‹å˜—è©¦é—œé–‰ã€Œåš´æ ¼ç¯©é¸æ¨¡å¼ã€æˆ–æ¸›å°‘å‹¾é¸çš„ç§‘ç›®ã€‚</p>
                                                        <button onClick={resetFilters} className="mt-4 px-4 py-2 bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 transition-colors text-sm font-medium flex items-center">
                                                            æ¸…é™¤æ‰€æœ‰ç¯©é¸
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        )}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <footer className="mt-8 text-center text-slate-400 text-xs pb-12">
                            <p className="mb-2">è³‡æ–™ä¾†æºï¼š115å­¸å¹´åº¦ç”„é¸å…¥å­¸æ‹›ç”Ÿç°¡ç« ã€114å­¸å¹´åº¦åœŸæœ¨ç¾¤ç¬¬ä¸€éšæ®µç¯©é¸æ¨™æº–</p>
                            <p>æœ¬ç³»çµ±åƒ…ä¾›åƒè€ƒï¼Œè‹¥è³‡æ–™æœ‰å‡ºå…¥ï¼Œè«‹ä»¥æŠ€å°ˆæ ¡é™¢æ‹›ç”Ÿå§”å“¡æœƒè¯åˆæœƒæœ€æ–°å…¬å‘Šç‚ºæº–ã€‚</p>
                        </footer>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
