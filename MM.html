<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>115學年度機械群甄選入學查詢系統</title>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #fff7ed; } /* Orange-50 background tint */
        /* Removed @apply rules as they don't work with CDN. Styles moved inline to JSX. */
    </style>
</head>
<body>

<div id="root"></div>

<script type="text/babel">

    // ============================================================
    // 資料庫：機械群 (01) - 114年資料更新版
    // screening: 第一階段通過標準 (藍色標籤)
    // extraTiebreakers: 同級分超額篩選 (紅色/橙色標籤)
    // ============================================================
    const mechanicalData = [
        {
            "id": "701001", "school": "國立中山大學", "dept": "機械與機電工程學系",
            "ratios": { "chi": 0, "eng": 4, "math": 4, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一專二(26)", "英文(10)", "數學(13)"],
            "extraTiebreakers": ["級分和(55)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 5
        },
        {
            "id": "107006", "school": "國立虎尾科技大學", "dept": "機械與電腦輔助工程系",
            "ratios": { "chi": 0, "eng": 4, "math": 4, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["數學(6)", "專二(10)"],
            "extraTiebreakers": ["級分和(41)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 35
        },
        {
            "id": "107008", "school": "國立虎尾科技大學", "dept": "材料科學與工程系",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["數學(5)", "國文(8)", "專二(9)", "專一(8)", "國文(5)", "英文(4)"],
            "extraTiebreakers": ["級分和(35)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 28
        },
        {
            "id": "107001", "school": "國立虎尾科技大學", "dept": "機械設計工程系",
            "ratios": { "chi": 0, "eng": 4, "math": 4, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一(8)", "專二(7)"],
            "extraTiebreakers": ["級分和(35)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 42
        },
        {
            "id": "107005", "school": "國立虎尾科技大學", "dept": "動力機械工程系",
            "ratios": { "chi": 0, "eng": 0, "math": 5, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["數學(2)", "專二(10)", "專一(7)"],
            "extraTiebreakers": ["級分和(31)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": false, "pro1": true, "pro2": true },
            "quota": 30
        },
        {
            "id": "107009", "school": "國立虎尾科技大學", "dept": "自動化工程系",
            "ratios": { "chi": 3, "eng": 0, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["數學(8)", "專一(9)"],
            "extraTiebreakers": ["級分和(42)"],
            "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true },
            "quota": 30
        },
        {
            "id": "107011", "school": "國立虎尾科技大學", "dept": "飛機工程系機械組",
            "ratios": { "chi": 0, "eng": 4, "math": 4, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["英文數學(17)", "專一專二(20)"],
            "extraTiebreakers": ["級分和(38)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 30
        },
        {
            "id": "107012", "school": "國立虎尾科技大學", "dept": "飛機工程系機械組(1)",
            "ratios": { "chi": 0, "eng": 4, "math": 4, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["英文數學(18)", "專一專二(17)"],
            "extraTiebreakers": ["級分和(39)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 5
        },
        {
            "id": "107020", "school": "國立虎尾科技大學", "dept": "工業管理系",
            "ratios": { "chi": 0, "eng": 4, "math": 0, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["數學(5)", "國文(9)", "專二(10)"],
            "extraTiebreakers": ["級分和(37)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 40
        },
        {
            "id": "107099", "school": "國立虎尾科技大學", "dept": "臥虎專班(願景計畫)",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["無資料"],
            "extraTiebreakers": ["無"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 3
        },
        {
            "id": "703001", "school": "國立金門大學", "dept": "運動與休閒學系",
            "ratios": { "chi": 3, "eng": 3, "math": 0, "pro1": 0, "pro2": 0 }, "change": "無變更",
            "screening": ["無資料"],
            "tiebreakerV": { "chi": false, "eng": false, "math": false, "pro1": false, "pro2": false },
            "quota": 2
        },
        {
            "id": "738024", "school": "國立屏東大學", "dept": "智慧機器人學系",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一(7)", "數學(5)", "國文(10)"],
            "extraTiebreakers": ["級分和(41)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 5
        },
        {
            "id": "103001", "school": "國立屏東科技大學", "dept": "機械工程系",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["數學(5)", "英文(6)", "專一(6)", "專二(10)"],
            "extraTiebreakers": ["級分和(29)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 45
        },
        {
            "id": "103003", "school": "國立屏東科技大學", "dept": "生物機電工程系",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一專二(15)", "英文(7)", "數學(9)"],
            "extraTiebreakers": ["級分和(35)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 30
        },
        {
            "id": "103013", "school": "國立屏東科技大學", "dept": "材料工程系",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專二(10)", "數學(9)"],
            "extraTiebreakers": ["級分和(38)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 38
        },
        {
            "id": "103099", "school": "國立屏東科技大學", "dept": "智慧機電學士學位學程",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一專二(16)", "英文(7)", "國文(8)", "數學(6)"],
            "extraTiebreakers": ["級分和(29)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 35
        },
        {
            "id": "105005", "school": "國立高雄科技大學", "dept": "工業工程與管理系",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["數學(10)"],
            "extraTiebreakers": ["級分和(42)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 40
        },
        {
            "id": "105001", "school": "國立高雄科技大學", "dept": "機械工程系",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 2, "pro2": 2 }, "change": "無變更",
            "screening": ["英文(11)", "數學(10)", "專一(10)"],
            "extraTiebreakers": ["級分和(44)"],
            "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true },
            "quota": 55
        },
        {
            "id": "105002", "school": "國立高雄科技大學", "dept": "機械工程系智能系統與控制組",
            "ratios": { "chi": 3, "eng": 0, "math": 3, "pro1": 2, "pro2": 2 }, "change": "無變更",
            "screening": ["英文(11)", "專一(9)", "數學(9)"],
            "extraTiebreakers": ["級分和(41)"],
            "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true },
            "quota": 45
        },
        {
            "id": "105003", "school": "國立高雄科技大學", "dept": "機械工程系微奈米技術組",
            "ratios": { "chi": 3, "eng": 0, "math": 3, "pro1": 2, "pro2": 2 }, "change": "無變更",
            "screening": ["數學(9)", "英文(10)", "專一(9)"],
            "extraTiebreakers": ["級分和(41)"],
            "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true },
            "quota": 45
        },
        {
            "id": "105012", "school": "國立高雄科技大學", "dept": "模具工程系",
            "ratios": { "chi": 3, "eng": 0, "math": 0, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["數學(7)", "英文(10)", "專一專二(20)"],
            "extraTiebreakers": ["級分和(38)"],
            "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true },
            "quota": 48
        },
        {
            "id": "105013", "school": "國立高雄科技大學", "dept": "模具工程系光電模具組",
            "ratios": { "chi": 3, "eng": 0, "math": 0, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["英文(7)", "數學(7)", "專一專二(19)"],
            "extraTiebreakers": ["級分和(40)"],
            "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true },
            "quota": 48
        },
        {
            "id": "105014", "school": "國立高雄科技大學", "dept": "模具工程系精微模具組",
            "ratios": { "chi": 3, "eng": 0, "math": 0, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["數學(7)", "英文(8)", "專一專二(19)"],
            "extraTiebreakers": ["級分和(38)"],
            "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true },
            "quota": 48
        },
        {
            "id": "105021", "school": "國立高雄科技大學", "dept": "機電工程系精密機械組",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 2, "pro2": 2 }, "change": "無變更",
            "screening": ["數學(10)", "專一專二(21)"],
            "extraTiebreakers": ["級分和(44)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 45
        },
        {
            "id": "105022", "school": "國立高雄科技大學", "dept": "機電工程系智動化組",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 2, "pro2": 2 }, "change": "無變更",
            "screening": ["專一專二(13)", "數學(13)"],
            "extraTiebreakers": ["級分和(49)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 45
        },
        {
            "id": "105030", "school": "國立高雄科技大學", "dept": "能源與冷凍空調工程系",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一專二(20)", "英文(9)", "國文(11)", "數學(8)"],
            "extraTiebreakers": ["無"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 45
        },
        {
            "id": "105040", "school": "國立高雄科技大學", "dept": "車輛工程系",
            "ratios": { "chi": 3, "eng": 0, "math": 3, "pro1": 2, "pro2": 2 }, "change": "無變更",
            "screening": ["英文(12)", "專一專二(18)", "專二(10)", "數學(8)"],
            "extraTiebreakers": ["無"],
            "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true },
            "quota": 45
        },
        {
            "id": "105090", "school": "國立高雄科技大學", "dept": "工業設計系",
            "ratios": { "chi": 3, "eng": 3, "math": 0, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["國文(10)", "英文(13)"],
            "extraTiebreakers": ["級分和(42)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": false, "pro1": true, "pro2": true },
            "quota": 38
        },
        {
            "id": "105100", "school": "國立高雄科技大學", "dept": "造船及海洋工程系",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一專二(18)"],
            "extraTiebreakers": ["級分和(40)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 35
        },
        {
            "id": "105118", "school": "國立高雄科技大學", "dept": "航運技術系",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專二(9)", "英文(11)", "專一專二(17)"],
            "extraTiebreakers": ["級分和(34)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 30
        },
        {
            "id": "105119", "school": "國立高雄科技大學", "dept": "輪機工程系",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["英文數學(18)"],
            "extraTiebreakers": ["級分和(35)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 30
        },
        {
            "id": "105120", "school": "國立高雄科技大學", "dept": "高瞻科技不分系學士學位學程",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 0 }, "change": "無變更",
            "screening": ["專二(10)", "英文(10)", "國文(10)"],
            "extraTiebreakers": ["級分和(35)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": false },
            "quota": 40
        },
        {
            "id": "707001", "school": "國立清華大學", "dept": "動力機械工程學系",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["英文數學(29)", "專一專二(29)"],
            "extraTiebreakers": ["級分和(69)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 10
        },
        {
            "id": "702001", "school": "國立陽明交通大學", "dept": "機械工程學系",
            "ratios": { "chi": 0, "eng": 4, "math": 4, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["英文數學(29)", "專一專二(29)"],
            "extraTiebreakers": ["級分和(58)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 5
        },
        {
            "id": "102001", "school": "國立雲林科技大學", "dept": "機械工程系",
            "ratios": { "chi": 5, "eng": 5, "math": 5, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["英文(9)", "數學(10)", "專二(11)", "專一(10)"],
            "extraTiebreakers": ["級分和(55)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 38
        },
        {
            "id": "102005", "school": "國立雲林科技大學", "dept": "環境與安全衛生工程系",
            "ratios": { "chi": 0, "eng": 5, "math": 5, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["英文(11)", "數學(10)", "專一專二(21)"],
            "extraTiebreakers": ["無"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 30
        },
        {
            "id": "102003", "school": "國立雲林科技大學", "dept": "營建工程系",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["英文數學(20)", "專一專二(24)"],
            "extraTiebreakers": ["無"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 30
        },
        {
            "id": "102020", "school": "國立雲林科技大學", "dept": "工業工程與管理系",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專二(12)", "國文(10)"],
            "extraTiebreakers": ["級分和(44)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 35
        },
        {
            "id": "102010", "school": "國立雲林科技大學", "dept": "工業設計系",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一(10)", "國文(11)", "英文(13)", "專二(11)"],
            "extraTiebreakers": ["無"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 25
        },
        {
            "id": "102099", "school": "國立雲林科技大學", "dept": "智慧機器人學士學位學程",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一(11)", "數學(10)", "國文(12)", "英文(10)", "專二(13)"],
            "extraTiebreakers": ["級分和(59)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 30
        },
        {
            "id": "110001", "school": "國立勤益科技大學", "dept": "機械工程系",
            "ratios": { "chi": 0, "eng": 5, "math": 5, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一(5)", "數學(5)", "專二(10)"],
            "extraTiebreakers": ["級分和(32)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 50
        },
        {
            "id": "110005", "school": "國立勤益科技大學", "dept": "冷凍空調與能源系能源應用組",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["數學(5)", "專二(9)"],
            "extraTiebreakers": ["級分和(46)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 40
        },
        {
            "id": "110006", "school": "國立勤益科技大學", "dept": "冷凍空調與能源系環境控制組",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["數學(4)", "專二(10)"],
            "extraTiebreakers": ["級分和(34)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 40
        },
        {
            "id": "110020", "school": "國立勤益科技大學", "dept": "工業工程與管理系",
            "ratios": { "chi": 3, "eng": 0, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["國文數學(16)", "專一專二(16)"],
            "extraTiebreakers": ["級分和(32)"],
            "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true },
            "quota": 40
        },
        {
            "id": "110099", "school": "國立勤益科技大學", "dept": "智慧自動化工程系",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 0 }, "change": "無變更",
            "screening": ["國文(10)", "專一專二(19)"],
            "extraTiebreakers": ["級分和(36)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": false },
            "quota": 45
        },
        {
            "id": "713001", "school": "國立彰化師範大學", "dept": "電機與機械科技學系",
            "ratios": { "chi": 4, "eng": 4, "math": 4, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一專二(18)"],
            "extraTiebreakers": ["級分和(51)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 2
        },
        {
            "id": "104001", "school": "國立臺北科技大學", "dept": "機械工程系",
            "ratios": { "chi": 6, "eng": 6, "math": 6, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["英文數學(24)", "專一專二(15)"],
            "extraTiebreakers": ["級分和(60)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 50
        },
        {
            "id": "104005", "school": "國立臺北科技大學", "dept": "能源與冷凍空調工程系",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一(13)", "英文數學(26)"],
            "extraTiebreakers": ["無"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 45
        },
        {
            "id": "104008", "school": "國立臺北科技大學", "dept": "材料及資源工程系材料組",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一(12)", "英文(14)"],
            "extraTiebreakers": ["級分和(50)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 25
        },
        {
            "id": "104009", "school": "國立臺北科技大學", "dept": "材料及資源工程系資源組",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["英文(13)", "英文數學(25)", "專一(11)"],
            "extraTiebreakers": ["級分和(51)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 25
        },
        {
            "id": "104020", "school": "國立臺北科技大學", "dept": "工業工程與管理系",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專二(12)", "專一專二(19)"],
            "extraTiebreakers": ["級分和(58)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 30
        },
        {
            "id": "114001", "school": "國立臺北商業大學", "dept": "創意科技與產品設計系(桃園校區)",
            "ratios": { "chi": 3, "eng": 0, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一(8)", "專二(12)"],
            "extraTiebreakers": ["級分和(38)"],
            "tiebreakerV": { "chi": true, "eng": false, "math": true, "pro1": true, "pro2": true },
            "quota": 35
        },
        {
            "id": "111001", "school": "國立臺北護理健康大學", "dept": "運動保健系",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["國文英文(10)", "專一專二(16)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 5
        },
        {
            "id": "503001", "school": "國立臺東專科學校", "dept": "動力機械科產業機械組",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專二(5)", "國文(5)"],
            "extraTiebreakers": ["級分和(22)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 40
        },
        {
            "id": "503002", "school": "國立臺東專科學校", "dept": "動力機械科車輛組",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一專二(10)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 40
        },
        {
            "id": "101001", "school": "國立臺灣科技大學", "dept": "機械工程系",
            "ratios": { "chi": 6, "eng": 4, "math": 4, "pro1": 2, "pro2": 2 }, "change": "無變更",
            "screening": ["英文數學(25)", "專一專二(25)"],
            "extraTiebreakers": ["級分和(66)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 40
        },
        {
            "id": "101003", "school": "國立臺灣科技大學", "dept": "材料科學與工程系",
            "ratios": { "chi": 3, "eng": 4, "math": 3, "pro1": 2, "pro2": 2 }, "change": "無變更",
            "screening": ["專一專二(25)", "英文數學(27)", "國文(12)"],
            "extraTiebreakers": ["級分和(65)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 6
        },
        {
            "id": "704001", "school": "國立臺灣師範大學", "dept": "機電工程學系",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["國文(11)", "英文數學(23)", "專一專二(25)"],
            "extraTiebreakers": ["級分和(51)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 5
        },
        {
            "id": "705001", "school": "國立臺灣海洋大學", "dept": "機械與機電工程學系",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一(11)", "專二(12)", "英文(13)", "數學(10)"],
            "extraTiebreakers": ["級分和(30)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 5
        },
        {
            "id": "724001", "school": "國立聯合大學", "dept": "機械工程學系",
            "ratios": { "chi": 3, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["專一專二(15)", "數學(8)"],
            "tiebreakerV": { "chi": true, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 22
        },
        {
            "id": "724002", "school": "國立聯合大學", "dept": "環境與安全衛生工程學系",
            "ratios": { "chi": 0, "eng": 3, "math": 3, "pro1": 3, "pro2": 3 }, "change": "無變更",
            "screening": ["數學(5)", "英文(9)", "國文(11)", "專一專二(14)"],
            "extraTiebreakers": ["級分和(30)"],
            "tiebreakerV": { "chi": false, "eng": true, "math": true, "pro1": true, "pro2": true },
            "quota": 9
        }
    ];

    const App = () => {
        // State
        const [filters, setFilters] = React.useState({
            chi: false,
            eng: false,
            math: false,
            pro1: false,
            pro2: false
        });
        const [strictMode, setStrictMode] = React.useState(true);
        const [searchTerm, setSearchTerm] = React.useState("");

        // Handlers
        const toggleFilter = (subject) => {
            setFilters(prev => ({ ...prev, [subject]: !prev[subject] }));
        };

        const resetFilters = () => {
            setFilters({ chi: false, eng: false, math: false, pro1: false, pro2: false });
            setSearchTerm("");
        };

        // Helper for subject labels
        const subjectLabels = {
            chi: "國文", eng: "英文", math: "數學", pro1: "專一", pro2: "專二"
        };
        const subjectShortLabels = {
            chi: "國", eng: "英", math: "數", pro1: "專一", pro2: "專二"
        };

        // Render Tiebreaker String based on Flags
        const renderTiebreaker = (item) => {
            if (!item.tiebreakerV) return <span className="text-gray-400 italic">-</span>;
            
            const activeSubjects = [];
            const subjectMap = { chi: "國", eng: "英", math: "數", pro1: "專一", pro2: "專二" };
            // Define order
            const order = ['chi', 'eng', 'math', 'pro1', 'pro2'];
            
            order.forEach(key => {
                if (item.tiebreakerV[key]) {
                    activeSubjects.push(subjectMap[key]);
                }
            });

            if (activeSubjects.length === 0) return <span className="text-gray-400 italic">無同級分採計資料</span>;

            // Construct Formula string
            const formula = `(${activeSubjects.join('+')})級分和`;

            return (
                <div className="flex items-center flex-wrap gap-1 mt-1">
                    <span className="text-xs text-gray-700 font-medium font-mono">
                        {formula}
                    </span>
                </div>
            );
        };

        // Filter Logic
        const filteredData = React.useMemo(() => {
            return mechanicalData.filter(item => {
                // 1. Keyword Search
                if (searchTerm) {
                    const searchKeywords = searchTerm.trim().split(/\s+/);
                    const match = searchKeywords.every(kw => {
                        const synonym = {
                            '北科': '臺北科技大學',
                            '台科': '臺灣科技大學',
                            '雲科': '雲林科技大學',
                            '高科': '高雄科技大學',
                            '虎科': '虎尾科技大學',
                            '屏科': '屏東科技大學',
                            '勤益': '勤益科技大學',
                            '車輛': '車輛工程',
                            '機械': '機械工程'
                        }[kw] || kw;
                        
                        return item.school.includes(kw) || item.dept.includes(kw) || 
                               item.school.includes(synonym) || item.dept.includes(synonym) ||
                               item.id.includes(kw);
                    });
                    if (!match) return false;
                }

                // 2. Subject Filter
                const selectedSubjects = Object.keys(filters).filter(k => filters[k]);
                
                if (selectedSubjects.length === 0) return true;

                if (strictMode) {
                    // Strict: Selected MUST be > 0, Unselected MUST be 0
                    for (let subj of selectedSubjects) {
                        if (item.ratios[subj] === 0) return false;
                    }
                    const allSubjects = ['chi', 'eng', 'math', 'pro1', 'pro2'];
                    for (let subj of allSubjects) {
                        if (!filters[subj] && item.ratios[subj] > 0) return false;
                    }
                    return true;
                } else {
                    // Inclusive: Selected MUST be > 0
                    for (let subj of selectedSubjects) {
                        if (item.ratios[subj] === 0) return false;
                    }
                    return true;
                }
            });
        }, [filters, strictMode, searchTerm]);

        // Helper function to sort screening criteria: 
        // 國文, 英文, 數學 (and combinations thereof) FIRST
        // 專一, 專二 (and combinations thereof) SECOND
        const sortScreening = (screeningItems) => {
            if (!screeningItems || screeningItems.length === 0) return screeningItems;
            
            // Define priority: General subjects (Chi, Eng, Math) get higher priority (lower index)
            // Professional subjects (Pro1, Pro2) get lower priority (higher index)
            const getPriority = (item) => {
                // Check if it contains professional subjects
                const hasPro = item.includes("專一") || item.includes("專二");
                // Check if it contains general subjects
                const hasGeneral = item.includes("國文") || item.includes("英文") || item.includes("數學");
                
                if (hasGeneral && !hasPro) return 1; // Pure general subjects -> First
                if (hasGeneral && hasPro) return 2;  // Mixed -> Middle (rare but possible)
                if (!hasGeneral && hasPro) return 3; // Pure professional -> Last
                return 4; // Others (e.g., "無資料")
            };

            return [...screeningItems].sort((a, b) => {
                return getPriority(a) - getPriority(b);
            });
        };

        return (
            <div className="min-h-screen pb-12">
                {/* Header */}
                <div className="bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-xl">
                    <div className="max-w-7xl mx-auto px-4 py-10 relative">
                        <div className="absolute top-0 right-0 p-4 opacity-20">
                            <i className="fa-solid fa-gears text-9xl"></i>
                        </div>
                        <h1 className="text-3xl md:text-4xl font-bold mb-3 tracking-tight">
                            <i className="fa-solid fa-wrench mr-3"></i>
                            115學年度 機械群甄選入學查詢系統
                        </h1>
                        <p className="text-orange-100 text-lg max-w-2xl font-light">
                            專為機械群(01)考生設計，整合國立科技大學最新倍率與114年篩選標準。
                        </p>
                    </div>
                </div>

                <div className="max-w-7xl mx-auto px-4 -mt-8 relative z-10">
                    {/* Control Panel */}
                    <div className="bg-white rounded-xl shadow-lg p-6 mb-8 border border-orange-100">
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            
                            {/* Left: Subject Select */}
                            <div>
                                <h3 className="text-sm font-bold text-gray-700 mb-4 flex items-center">
                                    <span className="bg-orange-100 text-orange-700 w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs">1</span>
                                    選擇篩選科目 (115年倍率)
                                </h3>
                                <div className="flex flex-wrap gap-3">
                                    {Object.entries(subjectLabels).map(([key, label]) => (
                                        <button
                                            key={key}
                                            onClick={() => toggleFilter(key)}
                                            className={`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 border shadow-sm flex items-center justify-center ${filters[key] ? 'bg-orange-500 text-white border-orange-500 ring-2 ring-orange-200' : 'bg-white text-gray-600 border-gray-300 hover:bg-orange-50 hover:border-orange-300 hover:text-orange-600'}`}
                                        >
                                            {filters[key] && <i className="fa-solid fa-check mr-2"></i>}
                                            {label}
                                        </button>
                                    ))}
                                </div>
                                <div className="mt-3 text-xs text-gray-500">
                                    <i className="fa-solid fa-circle-info mr-1 text-orange-400"></i>
                                    例如：勾選「數學」與「專一」，即可找出有採計這兩科的校系。
                                </div>
                            </div>

                            {/* Right: Mode & Search */}
                            <div className="flex flex-col gap-4">
                                <div>
                                    <h3 className="text-sm font-bold text-gray-700 mb-4 flex items-center">
                                        <span className="bg-orange-100 text-orange-700 w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs">2</span>
                                        設定篩選模式與搜尋
                                    </h3>
                                    
                                    {/* Toggle Switch */}
                                    <div 
                                        onClick={() => setStrictMode(!strictMode)}
                                        className={`cursor-pointer p-4 rounded-lg border transition-all duration-200 flex items-center justify-between group
                                            ${strictMode ? 'bg-orange-50 border-orange-200' : 'bg-white border-gray-200 hover:border-orange-300'}`}
                                    >
                                        <div className="flex items-center gap-3">
                                            <div className={`w-10 h-6 flex items-center rounded-full p-1 duration-300 ${strictMode ? 'bg-orange-600' : 'bg-gray-300'}`}>
                                                <div className={`bg-white w-4 h-4 rounded-full shadow-md transform duration-300 ${strictMode ? 'translate-x-4' : ''}`}></div>
                                            </div>
                                            <div className="flex flex-col">
                                                <span className={`text-sm font-bold ${strictMode ? 'text-orange-800' : 'text-gray-600'}`}>
                                                    嚴格篩選模式 (Only)
                                                </span>
                                                <span className="text-xs text-gray-500">
                                                    {strictMode ? '只顯示「完全符合」所選科目的科系 (其他科目倍率為0)' : '顯示「包含」所選科目的所有科系'}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Search Input */}
                                <div className="relative">
                                    <i className="fa-solid fa-magnifying-glass absolute left-3 top-3 text-gray-400"></i>
                                    <input 
                                        type="text" 
                                        placeholder="搜尋學校或科系名稱 (支援簡稱如：北科、車輛)..." 
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                        className="w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-orange-500 focus:outline-none transition-all"
                                    />
                                </div>
                            </div>
                        </div>
                        
                        {/* Results Count Bar */}
                        <div className="mt-4 pt-4 border-t border-orange-100 flex justify-between items-center">
                            <span className="text-gray-700 text-sm">
                                共找到 <strong className="text-orange-700 text-lg mx-1">{filteredData.length}</strong> 個符合條件的國立科系
                            </span>
                            {(Object.values(filters).some(Boolean) || searchTerm) && (
                                <button onClick={resetFilters} className="text-sm text-gray-500 hover:text-red-500 flex items-center gap-1 transition-colors">
                                    <i className="fa-solid fa-rotate-left"></i> 重置所有條件
                                </button>
                            )}
                        </div>
                    </div>

                    {/* Table */}
                    <div className="bg-white rounded-xl shadow-lg overflow-hidden border border-orange-200">
                        <div className="overflow-x-auto">
                            <table className="min-w-full divide-y divide-gray-200">
                                <thead className="bg-orange-50">
                                    <tr>
                                        <th scope="col" className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider bg-orange-50 border-b border-orange-200 w-3/12">學校科系 (代碼)</th>
                                        <th scope="col" className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider bg-orange-50 border-b border-orange-200 w-2/12 text-center">115年 篩選倍率</th>
                                        <th scope="col" className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider bg-orange-50 border-b border-orange-200 w-2/12">變更說明</th>
                                        <th scope="col" className="px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider bg-orange-50 border-b border-orange-200 w-5/12">114年 通過標準 與 同級分超額篩選</th>
                                    </tr>
                                </thead>
                                <tbody className="bg-white divide-y divide-orange-100">
                                    {filteredData.length > 0 ? (
                                        filteredData.map((item, idx) => (
                                            <tr key={item.id} className={`hover:bg-orange-50/50 transition-colors ${idx % 2 === 0 ? 'bg-white' : 'bg-orange-50/20'}`}>
                                                <td className="px-4 py-4 text-sm text-gray-700 border-b border-orange-100 align-top">
                                                    <div className="flex flex-col items-start">
                                                        <span className="px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-md mb-1 bg-red-100 text-red-700">
                                                            01 機械群
                                                        </span>
                                                        <span className="text-base font-bold text-gray-800">{item.school}</span>
                                                        <span className="text-orange-700 font-medium mt-0.5">{item.dept}</span>
                                                        <span className="text-xs text-gray-400 mt-1 font-mono">#{item.id}</span>
                                                        <span className="text-xs text-gray-500 mt-2">
                                                            <i className="fa-solid fa-user-group mr-1 text-orange-300"></i>
                                                            名額: {item.quota}
                                                        </span>
                                                    </div>
                                                </td>
                                                <td className="px-4 py-4 text-sm text-gray-700 border-b border-orange-100 align-top">
                                                    <div className="flex justify-center flex-wrap gap-2">
                                                        {Object.entries(item.ratios).map(([subj, val]) => (
                                                            val > 0 ? (
                                                                <div key={subj} className="flex flex-col items-center group">
                                                                    <span className="bg-orange-100 text-orange-800 text-[10px] font-bold px-2 py-0.5 rounded-t w-10 text-center border-b border-orange-200">
                                                                        {subjectShortLabels[subj]}
                                                                    </span>
                                                                    <span className="bg-white text-gray-800 font-bold text-sm border border-orange-100 w-10 text-center py-1 rounded-b shadow-sm group-hover:border-orange-300 transition-colors">
                                                                        {val}
                                                                    </span>
                                                                </div>
                                                            ) : null
                                                        ))}
                                                        {Object.values(item.ratios).every(v => v === 0) && (
                                                            <span className="text-gray-400 text-xs italic">無篩選資料</span>
                                                        )}
                                                    </div>
                                                </td>
                                                <td className="px-4 py-4 text-sm text-gray-700 border-b border-orange-100 align-top">
                                                    {item.change === "無變更" ? (
                                                        <span className="px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-md bg-green-100 text-green-700 border border-green-200">
                                                            <i className="fa-solid fa-check mr-1.5"></i>無變更
                                                        </span>
                                                    ) : (
                                                        <span className="px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-md bg-red-50 text-red-700 border border-red-200">
                                                            <i className="fa-solid fa-arrow-right-arrow-left mr-1.5 text-red-400"></i>
                                                            {item.change}
                                                        </span>
                                                    )}
                                                </td>
                                                <td className="px-4 py-4 text-sm text-gray-700 border-b border-orange-100 align-top">
                                                    {/* 114 Standards - FIRST ROW */}
                                                    <div className="mb-4">
                                                        <div className="flex items-center gap-2 mb-2">
                                                            <span className="text-xs font-bold text-gray-600 bg-blue-50 text-blue-700 px-2 py-0.5 rounded border border-blue-200 shadow-sm">
                                                                <i className="fa-solid fa-history mr-1"></i>114年 通過標準
                                                            </span>
                                                        </div>
                                                        <div className="flex flex-wrap gap-2">
                                                            {item.screening && item.screening.length > 0 && item.screening[0] !== "無資料" ? (
                                                                sortScreening(item.screening).map((std, i) => (
                                                                    <div key={i} className="flex items-center text-sm text-gray-700 bg-white px-3 py-1.5 rounded-md border border-blue-100 shadow-sm">
                                                                        <i className="fa-solid fa-check-circle text-blue-400 mr-2"></i>
                                                                        {std}
                                                                    </div>
                                                                ))
                                                            ) : (
                                                                <span className="text-gray-400 italic text-xs pl-1">無去年資料或新科系</span>
                                                            )}
                                                        </div>
                                                    </div>

                                                    {/* Separator */}
                                                    <div className="border-t-2 border-dashed border-gray-100 my-3"></div>

                                                    {/* Tiebreakers - SECOND ROW */}
                                                    <div>
                                                        <div className="flex items-center gap-2 mb-2">
                                                            <span className="text-xs font-bold text-red-700 bg-red-50 px-2 py-0.5 rounded border border-red-200 shadow-sm">
                                                                <i className="fa-solid fa-list-ol mr-1"></i>同級分超額篩選
                                                            </span>
                                                        </div>
                                                        
                                                        <div className="mb-3">
                                                            <div className="text-xs text-gray-500 mb-1">採計項目：</div>
                                                            {renderTiebreaker(item)}
                                                        </div>

                                                        {item.extraTiebreakers && item.extraTiebreakers.length > 0 && (
                                                            <div>
                                                                 <div className="text-xs text-gray-500 mb-1">去年超額篩選結果：</div>
                                                                 <div className="flex flex-wrap gap-2">
                                                                    {item.extraTiebreakers.map((tb, i) => (
                                                                        <span key={i} className={`text-xs font-bold px-2 py-1 rounded shadow-sm border 
                                                                            ${tb.includes('總級分') || tb.includes('級分和') 
                                                                                ? 'bg-red-500 text-white border-red-600' 
                                                                                : 'bg-white text-gray-600 border-gray-200'}`}>
                                                                            {tb}
                                                                        </span>
                                                                    ))}
                                                                </div>
                                                            </div>
                                                        )}
                                                        {(!item.extraTiebreakers || item.extraTiebreakers.length === 0) && (
                                                            <span className="text-gray-400 italic text-xs">無須超額篩選</span>
                                                        )}
                                                    </div>
                                                </td>
                                            </tr>
                                        ))
                                    ) : (
                                        <tr>
                                            <td colSpan="4" className="px-6 py-16 text-center text-gray-500">
                                                <div className="flex flex-col items-center">
                                                    <div className="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4 text-gray-400">
                                                        <i className="fa-solid fa-filter text-2xl"></i>
                                                    </div>
                                                    <h3 className="text-lg font-medium text-gray-800 mb-1">沒有符合條件的科系</h3>
                                                    <p className="text-sm text-gray-500">請嘗試關閉「嚴格篩選模式」或減少勾選的科目。</p>
                                                    <button onClick={resetFilters} className="mt-4 px-4 py-2 bg-orange-50 text-orange-600 rounded-lg hover:bg-orange-100 transition-colors text-sm font-medium">
                                                        清除所有篩選
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    )}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <footer className="mt-8 text-center text-gray-500 text-xs pb-12">
                        <p className="mb-2">資料來源：115學年度科技校院四年制及專科學校二年制甄選入學招生簡章、114學年度機械群第一階段統一入學測驗篩選標準</p>
                        <p>本表僅供參考，若資料有出入，請以技專校院招生委員會聯合會最新公告為準。</p>
                    </footer>
                </div>
            </div>
        );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
</script>

</body>
</html>
